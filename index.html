<!DOCTYPE html>
<html lang="en"><head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SMC NUCLEAR V2 - BTC ONLY</title>
<link rel="manifest" href="data:application/manifest+json,{\"name\":\"SMC NUCLEAR BTC\",\"short_name\":\"BTC NUKE\",\"start_url\":\".\",\"display\":\"standalone\",\"background_color\":\"#000\",\"theme_color\":\"#00ff9d\"}">
<style>
  body{margin:0;padding:20px;background:#000;color:#0f0;font-family:monospace;text-align:center;min-height:100vh}
  h1{font-size:3.2rem;color:#00ff9d;text-shadow:0 0 30px #00ff9d;margin:30px 0 10px}
  .card{max-width:560px;margin:20px auto;background:#0a0a0a;padding:30px;border-radius:22px;border:4px solid #00ff9d;box-shadow:0 0 60px rgba(0,255,157,0.6)}
  #price{font-size:4.2rem;margin:20px 0;font-weight:bold;color:#0f0;text-shadow:0 0 20px #0f0}
  #signal{padding:30px;font-size:2.3rem;font-weight:bold;border-radius:18px;margin:20px 0;min-height:100px;transition:all 0.6s}
  .buy{background:#001a00;border:5px solid #00ff9d;color:#00ff9d;box-shadow:0 0 80px #00ff9d;animation:glow 2s infinite}
  .sell{background:#1a0000;border:5px solid #ff3366;color:#ff3366;box-shadow:0 0 80px #ff3366;animation:glowred 2s infinite}
  .wait{background:#111;color:#888}
  @keyframes glow{0%,100%{box-shadow:0 0 30px #0f0}50%{box-shadow:0 0 100px #0f0}}
  @keyframes glowred{0%,100%{box-shadow:0 0 30px #f006}50%{box-shadow:0 0 100px #f006}}
  .btn{background:#00ff9d;color:#000;padding:20px 60px;border:none;border-radius:50px;font-size:1.6rem;margin:15px;cursor:pointer;font-weight:bold}
  .btn:hover{background:#00cc77;transform:scale(1.08)}
  .log{background:#000;padding:18px;border-radius:15px;margin-top:25px;max-height:400px;overflow:auto;text-align:left;font-size:1rem;color:#0f9;border:1px solid #0f0}
</style>
</head>
<body>
<h1>SMC NUCLEAR V2</h1>
<div class="card">
  <div id="price">Loading BTC...</div>
  <div id="signal" class="wait">Scanning Order Blocks & FVG...</div>
  <button class="btn" onclick="scan()">SCAN NOW</button>
  <button class="btn" id="autoBtn" onclick="toggleAuto()">AUTO: OFF</button>
</div>
<div class="log" id="log">System initialized – waiting for London/NY session...</div>

<script>
// ================== CONFIG – SIRF YE 2 LINE CHANGE KARO ==================
const BOT_TOKEN = '8595804085:AAGV9gVZqZ5FEmWNxveeEQnpgBL64hmH8wo';  // ← Apna Bot Token

const SEND_TO = [
    '1349670684',          // ← Personal ID
    '-1003329096261',      // ← Main Channel
    '-100'       // ← Backup Channel (optional)
];
// =====================================================================

let lastSignal = 0;
let auto = false;

function log(t){const l=document.getElementById('log');l.innerHTML=`${new Date().toLocaleTimeString()} → ${t}<br>`+l.innerHTML;}

// LIVE BTC PRICE
new WebSocket('wss://stream.binance.com:9443/ws/btcusdt@trade').onmessage=e=>{
  const p=parseFloat(JSON.parse(e.data).p).toFixed(1);
  document.getElementById('price').textContent=`$${p}`;
};
// Backup price
setInterval(async()=>{try{const r=await fetch('https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT');const j=await r.json();document.getElementById('price').textContent=`$${parseFloat(j.price).toFixed(1)}`;}catch{}},10000);

async function klines(tf,l=400){const r=await fetch(`https://api.binance.com/api/v3/klines?symbol=BTCUSDT&interval=${tf}&limit=${l}`);const d=await r.json();return d.map(c=>({o:+c[1],h:+c[2],l:+c[3],c:+c[4],v:+c[5]}));}

function detectOB(c){const b=[],e=[];for(let i=5;i<c.length-2;i++){const p=c[i-1],n=c[i];if(p.c<p.o&&n.c>n.o&&n.c>p.h&&n.l<=p.l)b.push({p:p.l,i:i});if(p.c>p.o&&n.c<n.o&&n.c<p.l&&n.h>=p.h)e.push({p:p.h,i:i});}return{bull:b.at(-1),bear:e.at(-1)};}
function detectFVG(c){for(let i=2;i<c.length;i++){const a=c[i-2],x=c[i];if(a.h<x.l)return'bull';if(a.l>x.h)return'bear';}return null;}
function isLondonNY(){const h=new Date().getUTCHours();return(h>=7&&h<=16);}

async function send(msg){
  if(!BOT_TOKEN.includes(':')) return;
  for(const id of SEND_TO){
    try{await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${id}&text=${encodeURIComponent(msg)}&parse_mode=HTML`);log(`Sent → ${id}`);}catch{log(`Failed → ${id}`);}
  }
}

async function scan(){
  if(!isLondonNY()){document.getElementById('signal').innerHTML="Outside London/NY Session";document.getElementById('signal').className="wait";return;}
  log("Scanning BTC – OB + FVG + Volume...");
  const [m15,h1]=await Promise.all([klines('15m',300),klines('1h',200)]);
  const price=m15[m15.length-1].c.toFixed(1);
  const volSpike=m15[m15.length-1].v > m15[m15.length-2].v*2.7;
  const ob15=detectOB(m15), ob1h=detectOB(h1), fvg=detectFVG(m15.slice(-15));
  const now=Date.now(); const el=document.getElementById('signal');

  // NUCLEAR LONG
  if(ob15.bull && ob1h.bull && fvg==='bull' && volSpike && price>=ob15.bull.p*0.992 && price<=ob15.bull.p*1.012 && now-lastSignal>60*60*1000){
    const entry=price, sl=(ob15.bull.p-450).toFixed(0), tp=(parseFloat(entry)+(parseFloat(entry)-sl)*4.5).toFixed(0);
    const msg=`<b>NUCLEAR BTC LONG</b>\nEntry: $${entry}\nTP: $${tp} (+${(tp-entry)})\nSL: $${sl} (-${(entry-sl)})\nRR: 1:4.5+\nSetup: Bullish OB + FVG + Liquidity Sweep + Volume Thrust\nTime: ${new Date().toLocaleString()}`;
    await send(msg); el.innerHTML="LONG FIRED!"; el.className="buy"; lastSignal=now; log(`LONG FIRED @ ${entry} → TP ${tp}`);
    return;
  }
  // NUCLEAR SHORT
  if(ob15.bear && ob1h.bear && fvg==='bear' && volSpike && price<=ob15.bear.p*1.008 && price>=ob15.bear.p*0.99 && now-lastSignal>60*60*1000){
    const entry=price, sl=(ob15.bear.p+450).toFixed(0), tp=(parseFloat(entry)-(sl-parseFloat(entry))*4.5).toFixed(0);
    const msg=`<b>NUCLEAR BTC SHORT</b>\nEntry: $${entry}\nTP: $${tp} (-${(entry-tp)})\nSL: $${sl} (+${(sl-entry)})\nRR: 1:4.5+\nSetup: Bearish OB + FVG + Liquidity Sweep + Volume Thrust\nTime: ${new Date().toLocaleString()}`;
    await send(msg); el.innerHTML="SHORT FIRED!"; el.className="sell"; lastSignal=now; log(`SHORT FIRED @ ${entry} → TP ${tp}`);
    return;
  }
  el.innerHTML="Waiting for Nuclear Setup..."; el.className="wait";
}

function toggleAuto(){
  auto=!auto; document.getElementById('autoBtn').textContent=auto?'AUTO: ON':'AUTO: OFF';
  if(auto) setInterval(scan,5*60*1000); log(auto?"Auto mode ON":"Auto mode OFF");
}

// START
scan();
setInterval(scan, 5*60*1000);
</script>
</body></html>